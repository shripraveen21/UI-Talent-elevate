<div class="p-6 space-y-6">
  <!-- Question -->
  <div class="space-y-4">
    <div class="flex items-start space-x-3">
      <div class="flex-shrink-0 w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center">
        <span class="text-sm font-semibold text-primary-600">Q</span>
      </div>
      <div class="flex-1">
        <h3 class="text-lg font-semibold text-gray-900 leading-relaxed">
          {{ questionData.question }}
        </h3>
      </div>
    </div>

    <!-- Options -->
    <div class="space-y-3 ml-11">
      <div 
        *ngFor="let key of (questionData.options | keyvalue)" 
        class="relative"
      >
        <label class="flex items-start space-x-3 p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 hover:shadow-soft"
               [class.border-gray-200]="!showAnswer || key.key !== questionData.correctAnswer && questionData.selectedAnswer !== key.key"
               [class.border-success-300]="showAnswer && key.key === questionData.correctAnswer"
               [class.bg-success-50]="showAnswer && key.key === questionData.correctAnswer"
               [class.border-error-300]="showAnswer && questionData.selectedAnswer === key.key && key.key !== questionData.correctAnswer"
               [class.bg-error-50]="showAnswer && questionData.selectedAnswer === key.key && key.key !== questionData.correctAnswer"
               [class.border-primary-300]="questionData.selectedAnswer === key.key && !showAnswer"
               [class.bg-primary-50]="questionData.selectedAnswer === key.key && !showAnswer">
          
          <input
            type="radio"
            name="option-{{ questionData.question }}"
            [value]="key.key"
            [(ngModel)]="questionData.selectedAnswer"
            (change)="selectOption(key.key)"
            class="sr-only"
          />
          
          <div class="flex-shrink-0 w-5 h-5 rounded-full border-2 flex items-center justify-center mt-0.5"
               [class.border-gray-300]="questionData.selectedAnswer !== key.key"
               [class.border-primary-500]="questionData.selectedAnswer === key.key && !showAnswer"
               [class.border-success-500]="showAnswer && key.key === questionData.correctAnswer"
               [class.border-error-500]="showAnswer && questionData.selectedAnswer === key.key && key.key !== questionData.correctAnswer">
            <div class="w-2.5 h-2.5 rounded-full"
                 [class.bg-primary-500]="questionData.selectedAnswer === key.key && !showAnswer"
                 [class.bg-success-500]="showAnswer && key.key === questionData.correctAnswer"
                 [class.bg-error-500]="showAnswer && questionData.selectedAnswer === key.key && key.key !== questionData.correctAnswer">
            </div>
          </div>
          
          <div class="flex-1">
            <div class="flex items-center space-x-2">
              <span class="text-sm font-medium text-gray-600">{{ key.key }}.</span>
              <span class="text-gray-900 font-medium">{{ key.value }}</span>
            </div>
            
            <!-- Status Icons -->
            <div class="flex items-center space-x-2 mt-2" *ngIf="showAnswer">
              <svg *ngIf="key.key === questionData.correctAnswer" class="w-4 h-4 text-success-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
              </svg>
              <svg *ngIf="questionData.selectedAnswer === key.key && key.key !== questionData.correctAnswer" class="w-4 h-4 text-error-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
              </svg>
              <span *ngIf="key.key === questionData.correctAnswer" class="text-xs font-medium text-success-600">Correct Answer</span>
              <span *ngIf="questionData.selectedAnswer === key.key && key.key !== questionData.correctAnswer" class="text-xs font-medium text-error-600">Your Answer</span>
            </div>
          </div>
        </label>
      </div>
    </div>
  </div>

  <!-- Answer Section -->
  <div *ngIf="showAnswer" class="ml-11 space-y-4">
    <div class="bg-gray-50 rounded-xl p-6 space-y-4">
      <!-- Result Summary -->
      <div *ngIf="questionData.selectedAnswer" class="flex items-center space-x-3">
        <div class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center"
             [class.bg-success-100]="isCorrect()"
             [class.bg-error-100]="!isCorrect()">
          <svg *ngIf="isCorrect()" class="w-5 h-5 text-success-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
          </svg>
          <svg *ngIf="!isCorrect()" class="w-5 h-5 text-error-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
          </svg>
        </div>
        <div>
          <h4 class="font-semibold"
              [class.text-success-800]="isCorrect()"
              [class.text-error-800]="!isCorrect()">
            {{ isCorrect() ? 'Correct!' : 'Incorrect' }}
          </h4>
          <p class="text-sm text-gray-600">
            Your answer: {{ questionData.selectedAnswer }}
          </p>
        </div>
      </div>

      <!-- Correct Answer -->
      <div class="space-y-2">
        <h4 class="font-semibold text-gray-900 flex items-center">
          <svg class="w-4 h-4 mr-2 text-success-500" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
          </svg>
          Correct Answer
        </h4>
        <p class="text-gray-700 font-medium">{{ questionData.correctAnswer }}</p>
      </div>

      <!-- Explanation -->
      <div class="space-y-2">
        <h4 class="font-semibold text-gray-900 flex items-center">
          <svg class="w-4 h-4 mr-2 text-primary-500" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
          </svg>
          Explanation
        </h4>
        <p class="text-gray-700 leading-relaxed">{{ questionData.explanation }}</p>
      </div>
    </div>
  </div>
</div>
