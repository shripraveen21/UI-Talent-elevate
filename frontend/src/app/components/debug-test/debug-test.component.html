<div class="max-w-3xl mx-auto my-8 p-6 bg-white rounded-lg shadow-lg">

  <div *ngIf="loading" class="flex items-center justify-center py-8">
    <span class="text-blue-600 font-semibold text-lg animate-pulse">Loading debug exercise...</span>
  </div>

  <div *ngIf="error" class="flex items-center justify-center py-8">
    <span class="text-red-500 font-semibold text-lg">{{ error }}</span>
  </div>

  <div *ngIf="!loading && !error && exercises.length > 0">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">Debug Exercise</h2>
    <div class="mb-6 text-gray-700">
      <span class="font-semibold">Time Remaining:</span>
      <span class="text-blue-600">{{ formatTimer(timer) }}</span>
    </div>

    <form (ngSubmit)="submit()" class="space-y-8">
      <div *ngFor="let exercise of exercises" class="bg-gray-50 rounded-lg p-4 shadow mb-4">
        <div class="mb-2">
          <strong class="text-lg text-gray-800">{{ exercise.title }}</strong>
        </div>
        <div class="mb-2 text-gray-700">{{ exercise.description }}</div>
        <div class="mb-2">
          <span class="font-semibold text-gray-600">Code:</span>
          <pre class="bg-gray-100 rounded-md p-3 text-sm text-gray-700 overflow-x-auto">{{ exercise.code }}</pre>
        </div>
        <div class="mb-2 text-gray-600">
          <span class="font-medium">Technology:</span> {{ exercise.technology }}
        </div>
        <div class="mb-2 text-gray-600">
          <span class="font-medium">Difficulty:</span> {{ exercise.difficulty }}
        </div>
        <div class="mb-2 text-gray-600">
          <span class="font-medium">Expected Behavior:</span> {{ exercise.expectedBehavior }}
        </div>
        <div class="mb-2 text-gray-600">
          <span class="font-medium">Current Behavior:</span> {{ exercise.currentBehavior }}
        </div>
        <!-- Simple code editor -->
        <div class="mb-2">
          <label class="block font-semibold text-gray-700 mb-1" [for]="'answer-' + exercise.id">Your Debug Solution:</label>
          <textarea
            #answerBox
            [attr.name]="exercise.id"
            [id]="'answer-' + exercise.id"
            rows="10"
            class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"
            (input)="handleAnswer(exercise.id, answerBox.value)"
          ></textarea>
        </div>
      </div>

      <button
        type="submit"
        [disabled]="submitted"
        class="px-6 py-2 bg-blue-600 text-white rounded font-semibold hover:bg-blue-700 transition disabled:opacity-50"
      >
        Submit
      </button>
    </form>
  </div>
</div>