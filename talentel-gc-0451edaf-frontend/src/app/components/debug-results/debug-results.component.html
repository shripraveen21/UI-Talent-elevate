html
<!-- Main Content -->
<main class="container mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 py-10" *ngIf="!loading && result">
  <!-- Page Title -->
  <div>
    <h1 class="text-3xl font-bold text-gray-900">Debug Exercise Results</h1>
  </div>

  <!-- Main Results Card -->
  <div class="mt-8 bg-white p-8 rounded-lg border border-gray-200">
    <div>
      <h2 class="text-xl font-semibold text-gray-900">Debug Assessment Results</h2>
      <p class="mt-1 text-sm text-gray-500">Detailed analysis of your debugging performance</p>
    </div>

    <!-- Score Section -->
    <div class="mt-6 text-center border-b border-gray-200 pb-6">
      <p class="text-sm font-medium text-gray-500">Overall Score</p>
      <p class="text-gray-400 text-xs">Your performance summary</p>
      <!-- Dynamic score color based on percentage -->
      <p class="text-6xl font-bold mt-2" 
         [class.text-red-600]="result.overall_evaluation?.overall_score < 60"
         [class.text-orange-500]="result.overall_evaluation?.overall_score >= 60 && result.overall_evaluation?.overall_score < 80"
         [class.text-green-600]="result.overall_evaluation?.overall_score >= 80">
        {{ result.overall_evaluation?.overall_score | number:'1.0-0' }}%
      </p>
      <p class="text-lg font-semibold text-gray-500">{{ result.overall_evaluation?.summary }}</p>
    </div>

    <div class="grid grid-cols-4 divide-x divide-gray-200 text-center">
      <div class="py-4">
        <p class="text-2xl font-bold text-blue-600">{{ result.overall_evaluation?.overall_ratings?.correctness || 0 }}</p>
        <p class="text-sm text-gray-500">Correctness</p>
      </div>
      <div class="py-4">
        <p class="text-2xl font-bold text-blue-600">{{ result.overall_evaluation?.overall_ratings?.completeness || 0 }}</p>
        <p class="text-sm text-gray-500">Completeness</p>
      </div>
      <div class="py-4">
        <p class="text-2xl font-bold text-blue-600">{{ result.overall_evaluation?.overall_ratings?.quality || 0 }}</p>
        <p class="text-sm text-gray-500">Quality</p>
      </div>
      <div class="py-4">
        <p class="text-2xl font-bold text-blue-600">{{ result.overall_evaluation?.overall_ratings?.alternatives || 0 }}</p>
        <p class="text-sm text-gray-500">Alternatives</p>
      </div>
    </div>
  </div>

  <!-- Bug Performance Overview -->
  <div class="mt-8 bg-gradient-to-r from-blue-50 to-blue-50 p-8 rounded-lg border border-blue-200">
    <div class="flex items-center space-x-3 mb-6">
      <div class="bg-blue-100 p-1.5 rounded-full">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
          <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1  01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
        </svg>
      </div>
      <div>
        <h3 class="text-lg font-semibold text-gray-900">Bug Analysis Summary</h3>
        <p class="text-sm text-gray-500">Overview of your debugging performance across all bugs</p>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="bg-white p-6 rounded-lg border border-gray-200 text-center">
        <div class="text-3xl font-bold text-blue-600 mb-2">{{ result.bug_wise_results?.length || 0 }}</div>
        <div class="text-sm font-medium text-gray-700 mb-1">Total Bugs</div>
        <div class="text-xs text-gray-500">Debugging challenges</div>
      </div>

      <div class="bg-white p-6 rounded-lg border border-gray-200 text-center">
        <div class="text-3xl font-bold text-green-600 mb-2">{{ getSuccessfulBugs() }}</div>
        <div class="text-sm font-medium text-gray-700 mb-1">Successfully Fixed</div>
        <div class="text-xs text-gray-500">Bugs resolved correctly</div>
      </div>

      <div class="bg-white p-6 rounded-lg border border-gray-200 text-center">
        <div class="text-3xl font-bold text-orange-600 mb-2">{{ getPartialBugs() }}</div>
        <div class="text-sm font-medium text-gray-700 mb-1">Partially Fixed</div>
        <div class="text-xs text-gray-500">Bugs needing improvement</div>
      </div>
    </div>
  </div>

  <!-- Bug-wise Results Section -->
  <div class="mt-8 bg-white p-6 rounded-lg border border-gray-200">
    <div class="flex justify-between items-center cursor-pointer" (click)="expandedSections.bugResults = !expandedSections.bugResults">
      <div class="flex items-center space-x-3">
        <div class="bg-blue-100 p-1.5 rounded-full">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-gray-900">Detailed Bug Analysis</h3>
          <p class="text-sm text-gray-500">Individual bug performance and feedback</p>
        </div>
      </div>
      <div class="flex items-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" [class.rotate-180]="expandedSections.bugResults" class="h-5 w-5 text-gray-500 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </div>
    </div>

    <div *ngIf="expandedSections.bugResults" class="mt-6 space-y-6">
      <div *ngFor="let bug of result.bug_wise_results; let i = index" class="border border-gray-200 rounded-lg p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center space-x-3">
            <div class="w-3 h-3 rounded-full" 
                 [class.bg-green-500]="getBugStatus(bug) === 'success'"
                 [class.bg-red-500]="getBugStatus(bug) === 'failed'"
                 [class.bg-yellow-500]="getBugStatus(bug) === 'partial'"></div>
            <h4 class="text-lg font-semibold text-gray-800">Bug #{{ i + 1 }}: {{ bug.topic }}</h4>
            <span class="px-2 py-1 text-xs font-medium rounded-full" 
                  [class.bg-green-100]="getBugStatus(bug) === 'success'"
                  [class.text-green-800]="getBugStatus(bug) === 'success'"
                  [class.bg-red-100]="getBugStatus(bug) === 'failed'"
                  [class.text-red-800]="getBugStatus(bug) === 'failed'"
                  [class.bg-yellow-100]="getBugStatus(bug) === 'partial'"
                  [class.text-yellow-800]="getBugStatus(bug) === 'partial'">
              {{ getBugStatus(bug) | titlecase }}
            </span>
          </div>
          <div class="text-right">
            <div class="text-2xl font-bold" 
                 [class.text-green-600]="bug.assessment?.overall_score >= 70"
                 [class.text-yellow-600]="bug.assessment?.overall_score >= 50 && bug.assessment?.overall_score < 70"
                 [class.text-red-600]="bug.assessment?.overall_score < 50">
              {{ bug.assessment?.overall_score || 0 }}%
            </div>
            <div class="text-sm text-gray-500">Overall Score</div>
          </div>
        </div>
        <p class="text-gray-600 mb-4">{{ bug.summary }}</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div *ngIf="bug.strengths && bug.strengths.length > 0">
            <h5 class="font-medium text-green-700 mb-2">Strengths</h5>
            <div class="flex flex-wrap gap-2">
              <span *ngFor="let strength of bug.strengths"
                class="text-xs font-medium bg-green-100 text-green-800 px-2.5 py-1 rounded-md">
                {{ strength }}
              </span>
            </div>
          </div>

          <div *ngIf="bug.areas_for_improvement && bug.areas_for_improvement.length > 0">
            <h5 class="font-medium text-red-700 mb-2">Areas for Improvement</h5>
            <div class="flex flex-wrap gap-2">
              <span *ngFor="let area of bug.areas_for_improvement"
                class="text-xs font-medium bg-red-100 text-red-800 px-2.5 py-1 rounded-md">
                {{ area }}
              </span>
            </div>
          </div>
        </div>

        <div *ngIf="bug.next_steps" class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
          <h5 class="font-medium text-yellow-800 mb-1">Next Steps</h5>
          <p class="text-sm text-yellow-700">{{ bug.next_steps }}</p>
        </div>

        <div *ngIf="bug.resources && bug.resources.length > 0" class="mt-4">
          <details class="group">
            <summary class="font-medium text-blue-700 cursor-pointer hover:text-blue-800 transition-colors flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 transform group-open:rotate-90 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
              Resources ({{ bug.resources.length }})
            </summary>
            <div class="mt-2 space-y-2">
              <div *ngFor="let resource of bug.resources" class="p-3 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors">
                <a [href]="resource.url" target="_blank" class="text-blue-700 hover:text-blue-800 hover:underline font-medium flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                  </svg>
                  {{ resource.title }}
                </a>
                <p class="text-gray-600 text-sm mt-1">{{ resource.description }}</p>
              </div>
            </div>
          </details>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Loading State -->
<div *ngIf="loading" class="mt-8 bg-white p-8 rounded-lg border border-gray-200">
  <div class="flex items-center justify-center py-8">
    <span class="text-blue-600 font-semibold text-lg animate-pulse">Loading results...</span>
  </div>
</div>

<!-- Error State -->
<div *ngIf="error" class="mt-8 bg-white p-8 rounded-lg border border-gray-200">
  <div class="flex items-center justify-center py-8">
    <span class="text-red-500 font-semibold text-lg">{{ error }}</span>
  </div>
</div>
